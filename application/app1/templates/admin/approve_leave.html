{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title> leave</title>
    <!-- plugins:css -->
    <link rel="stylesheet" href="{% static 'assets/vendors/iconfonts/mdi/css/materialdesignicons.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/vendors/iconfonts/ionicons/dist/css/ionicons.css' %}">
    <link rel="stylesheet" href="{% static 'assets/vendors/iconfonts/flag-icon-css/css/flag-icon.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/vendors/css/vendor.bundle.base.css' %}">
    <link rel="stylesheet" href="{% static 'assets/vendors/css/vendor.bundle.addons.css' %}">
    <!-- endinject -->
    <!-- plugin css for this page -->
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <link rel="stylesheet" href="{% static 'assets/css/shared/style.css' %}">
    <!-- endinject -->
    <!-- Layout styles -->
    <link rel="stylesheet" href="{% static 'assets/css/demo_1/style.css' %}">
    <!-- End Layout styles -->
    <link rel="shortcut icon" href="{% static 'assets/images/favicon.ico' %}" />
    <style>

      button {
       position: relative;
       display: inline-block;
       margin: 10px;
       padding: 9px 30px;
       text-align: center;
       font-size: 18px;
       letter-spacing: 1px;
       text-decoration: none;
       color: #000000;
       background: transparent;
       cursor: pointer;
       transition: ease-out 0.5s;
       border-radius: 30px;
       border: 2px solid #0fad1c;
       border-radius: 10px;
       box-shadow: inset 0 0 0 0 #30c744;
      }
      
      button:hover {
       color: white;
       box-shadow: inset 0 -100px 0 0 #45df5e;
      }
      
      button:active {
       transform: scale(0.9);
      }
      
      #customers {
        font-family: Arial, Helvetica, sans-serif;
        border-collapse: collapse;
        width: 100%;
      }
      
      #customers td, #customers th {
        border: 1px solid #ddd;
        padding: 8px;
      }
      
      #customers tr:nth-child(even){background-color: #f2f2f2;}
      
      #customers tr:hover {background-color: #ddd;}
      
      #customers th {
        padding-top: 12px;
        padding-bottom: 12px;
        text-align: left;
        background-color: #04AA6D;
        color: white;
      }
        </style>
  </head>

  <body>
    <div class="container-scroller">
      <!-- partial:partials/_navbar.html -->
      <nav class="navbar default-layout col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
        <div class="text-center navbar-brand-wrapper d-flex align-items-top justify-content-center">
          <a class="navbar-brand brand-logo" href="#">Admin Home </a>
          <a class="navbar-brand brand-logo-mini" href="index.html">
            <img src="{% static 'assets/images/logo-mini.svg' %}" alt="logo" /> </a>
        </div>
        <div class="navbar-menu-wrapper d-flex align-items-center">
         
    
          <ul class="navbar-nav ml-auto">
            
            
            <li class="nav-item dropdown d-none d-xl-inline-block user-dropdown">
              <a class="nav-link dropdown-toggle" id="UserDropdown" href="#" data-toggle="dropdown" aria-expanded="false">
                <img class="img-xs rounded-circle" src="{% static 'assets/images/faces/face8.jpg' %}" alt="Profile image"> </a>
              <div class="dropdown-menu dropdown-menu-right navbar-dropdown" aria-labelledby="UserDropdown">
                <div class="dropdown-header text-center">
                  <img class="img-md rounded-circle" src="{% static 'assets/images/faces/face8.jpg' %}" alt="Profile image">
                  <p class="mb-1 mt-3 font-weight-semibold">Admin</p>
                </div>
                <a class="dropdown-item"  href="{% url 'LoginPage' %}" >Sign Out<i class="dropdown-item-icon ti-power-off"></i></a>
              </div>
            </li>
          </ul>
          <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button" data-toggle="offcanvas">
            <span class="mdi mdi-menu"></span>
          </button>
        </div>
      </nav>
      <!-- partial -->
      <div class="container-fluid page-body-wrapper">
        <!-- partial:partials/_sidebar.html -->
        <nav class="sidebar sidebar-offcanvas" id="sidebar">
          <ul class="nav">
            <li class="nav-item nav-profile">
              <a href="#" class="nav-link">
                <div class="profile-image">
                  <img class="img-xs rounded-circle" src="{% static 'assets/images/faces/face8.jpg' %}" alt="profile image">
                  <div class="dot-indicator bg-success"></div>
                </div>
                <div class="text-wrapper">
                  <p class="profile-name">Admin </p>
                </div>
              </a>
            </li>
            <li class="nav-item nav-category">Main Menu</li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'AdminHome' %}">
                <i class="menu-icon typcn typcn-document-text"></i>
                <span class="menu-title">Dashboard</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" data-toggle="collapse" href="#ui-basic" aria-expanded="false" aria-controls="ui-basic">
                <i class="menu-icon typcn typcn-coffee"></i>
                <span class="menu-title">Employee Management</span>
                <i class="menu-arrow"></i>
              </a>
              <div class="collapse" id="ui-basic">
                <ul class="nav flex-column sub-menu">
                  <li class="nav-item">
                    <a class="nav-link" href="{% url 'Regemployee' %}">Add new employee</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="{% url 'View_employee' %}">View/Edit employee details</a>
                  </li>
                 
                </ul>
              </div>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'Admin_view_attendance' %}">
                <i class="menu-icon typcn typcn-document-text"></i>
                <span class="menu-title">View Attendance details</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'Admin_view_salary' %}">
                <i class="menu-icon typcn typcn-document-text"></i>
                <span class="menu-title">View Salary details</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'Admin_view_leave' %}">Leave requests</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'Admin_view_complaint' %}">Complaints</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'View_calendar' %}">Calendar</a>
            </li>
            
            
            
         
          </ul>
        </nav>
        <!-- partial -->
        <div class="main-panel">

          <center>
            <div style="width: 80%;height: 800px;margin-top: 50px;">
              
  <h3 >Leave Requests</h3>
  <table class="medusrtab1" id="customers">
    
    <tr>
      <!-- <th >User ID</th> -->
      <th class="idcls">Id</th>
      <th >User Name</th>
      <th>Date</th>
      <th>Reason</th>
      <th>Status</th>
      <th>Approve</th>
    </tr>
    {% for i in data %}
    <tr>
      <td>{{i.id}}</td>
      <td>{{i.Usernm}}</td>
        <td>{{i.Date}}</td>
        <td>{{i.Reason}}</td>
        <td>{{i.Status}}</td>
        <td><button id="btn1">Approve</button></td>
        
     
    
    </tr>
    {% endfor %}
  </table>
  
  </div>
  
          
  
            
  
          </center>          <!-- partial:partials/_footer.html -->
      
          <!-- partial -->
        </div>
        <!-- main-panel ends -->
      </div>
      <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->
    <!-- plugins:js -->
    <script src="{% static 'assets/vendors/js/vendor.bundle.base.js' %}"></script>
    <script src="{% static 'assets/vendors/js/vendor.bundle.addons.js' %}"></script>
    <!-- endinject -->
    <!-- Plugin js for this page-->
    <!-- End plugin js for this page-->
    <!-- inject:js -->
    <script src="{% static 'assets/js/shared/off-canvas.js' %}"></script>
    <script src="{% static 'assets/js/shared/misc.js' %}"></script>
    <!-- endinject -->
    <!-- Custom js for this page-->
    <script src="{% static 'assets/js/demo_1/dashboard.js' %}"></script>
    <!-- End custom js for this page-->
    <script src="{% static 'assets/js/shared/jquery.cookie.js' %}" type="text/javascript"></script>
  </body>
  <script>
   $("#customers").on('click','#btn1',function(){
    
    // get the current row
    var currentRow=$(this).closest("tr"); 
  
    var lid=currentRow.find("td:eq(0)").text(); // get current row 1st TD value
    $.ajax({url:"/approve_leave/",
          data:{
              
              "lid":lid,
  
          },
      success:function(da){
             if(da.info=="yes"){
               alert("Leave Approved")
               window.location.href="{% url 'Admin_view_leave' %}"
    
             }
             else{
               alert("Oops Some error occured!!")
               
             }
          
      }
    });
});
  </script>
</html>